# HeartSketch 要件仕様書

## 1. アプリ概要

HeartSketch（こころスケッチ）は、  
**日々の体調・メンタルの状態を短時間で記録し、後から振り返りやすい形で可視化する**  
ことを目的としたメンタル管理アプリである。

本アプリの価値は以下にある。

- 記録のハードルを下げ、継続しやすい習慣を作る
- 毎日の記録を通じて、自分の状態を客観視しやすくする
- 思考や感情を書き出すことで、心の負荷を下げるサポートを行う

主要な特徴は  
**3行日記・5段階評価・感情吐き出しテキスト・シンプルで心理的負担の少ないUI**  
による、短時間での記録体験である。

---


## 2. ターゲットユーザー

本アプリの主なユーザーは以下の通りとする。

### 2-1. 想定ユーザー（対象者）
- 日々の体調やメンタルの変化に気づきにくい人
- 通院時に「最近どうですか？」と聞かれて説明が難しい人
- 手帳・メモ・日記が続かず、記録負担を軽くしたい人
- ストレスを自覚しづらく、限界に気づくのが遅い人
- 自分の感情を言語化することが苦手な人

### 2-2. 属性（利用シーンの例）
- 学生〜社会人まで幅広い層
- 通院経験の有無は問わない（メンタル疾患の有無も問わない）
- 日記が続かなかった経験があり、短時間での記録ニーズがある人


## 3. 困りごと・ニーズ

本章では、想定ユーザーおよび開発者自身が抱える課題を整理し、  
アプリが解決すべきニーズを明確化する。

### 3-1. 開発者視点（自分自身のニーズ）

- 自分の状態が数字で見えるほうが安心できる
- ネガティブ思考を素早く書き出せる場所がほしい
- 思考が頭に溜まると負担が大きいため、吐き出し処理が必要
- スマホから短時間で記録できる操作性がほしい
- 感情整理を継続的な習慣にしたい
- 情報量が多いUIは負担となり、継続が難しい

### 3-2. 一般ユーザー視点（想定ユーザーのニーズ）

- 日記は続かないが、1〜3分であれば書ける
- UIが複雑だと使う気になれないためシンプルさが必要
- 他人に感情・記録を見られたくない（プライバシー重視）
- 個人情報を入力したくないためアカウント不要で使いたい
- どこでもすぐに感情整理したい
- 自分の状態を理解する習慣をつけたい

### 3-3. 共通の困りごと

- 記録行動のハードルを下げる必要がある
- 難しくないUI・心理的負担の少ない画面が求められる
- 入力項目や操作が多いと継続しづらい
- ストレス蓄積に気づかず突然崩れることを避けたい

---


## 4. 機能要件（概要）

本章では、上記ニーズに基づき本アプリが提供する機能を定義する。  
まずは「短時間入力」「アカウント不要」「ローカル保存」を前提とした  
最小限のコア機能（MVP）から開発を開始する。

### 4-1. コア機能（MVP）

- **3行日記**  
  - 1日の出来事・よかったこと・ひとことメモなどを最大3行で記録する機能

- **メンタル／体力の5段階評価**  
  - その日のメンタル・体力（疲労）状態をそれぞれ5段階で記録する

- **感情吐き出しテキストエリア**  
  - ネガティブな思考・感情を自由に書き出せる入力欄

- **AsyncStorage 保存（ローカル保存）**  
  - すべてのデータを端末ローカルに保存  
  - アカウント登録・サーバ通信は不要  

### 4-2. 拡張機能（将来的な追加候補）

- **ロック機能（任意）**  
  - アプリ起動時のPIN/生体認証ロック  
  - 端末ロックとの併用によりプライバシーを強化

- **通院記録**  
  - 通院日・病院名・症状メモなどを簡易的に記録  
  - 初期はシンプルな仕様とし、必要性に応じて拡張可能


## 5. 非機能要件

本章では、機能以外でアプリに求められる品質要件を定義する。

### 5-1. パフォーマンス

- 初回レンダリングは 2秒以内、画面遷移後の描画は 1秒以内 を目標とする
- データ保存（AsyncStorage の書き込み）は 3秒以内 を目標とする
- 軽量な状態管理とシンプルなDOM操作を優先し、処理負荷を最小限にする

### 5-2. 操作性・ユーザビリティ

- 1回の記録は 3分以内で完了 できる UI/遷移を設計する（認知負荷の軽減）
- 片手操作を前提とし、タップ領域・配置はスマホ操作に最適化する
- ホーム画面から 1タップ でコア機能（記録・一覧・今日の記録）へアクセス可能にする 
- 操作説明がなくても直感的に理解できるシンプルな導線とする

### 5-3. 信頼性・データ保全

- AsyncStorage 保存失敗時は、ユーザへ通知し リトライ可能な挙動 を提供す
- データは外部送信せず、アプリ削除まで端末内に保持 する
- 保存処理は基本的に同期的に完了するが、必要に応じて非同期キューで安全に書き込む
- 異常系（空データ・破損データ）は安全に復帰可能なガード処理を行う

### 5-4. セキュリティ・プライバシー

- アカウント登録・外部送信は一切行わず、完全ローカルでデータが完結 する
- 入力されたデータはセンシティブ情報として扱い、第三者が閲覧できないファイル構造を維持する
- アプリロック機能（PIN / 生体認証）は、ユーザ需要を見て リリース後に検討 する

### 5-5. 保守性・拡張性

- 各画面は「入力」「一覧」「詳細」など 責務単位でコンポーネント分割 する
- 共通ロジック（Validation・Date処理・Storage操作）はユーティリティ関数として集約する
- 将来的な機能追加（グラフ・カレンダー・ToDo）に対応できるよう、
- データ構造・状態管理は 単一責務（Single Responsibility） を遵守する
- ディレクトリ構成は /screens, /components, /hooks, /utils を基本とする

### 5-6. デザイン・表現方針（UIトーン）

- 刺激の少ない 低彩度カラー を基調とし、メンタルに負担をかけない配色とする
- 情報量は最小限にし、画面内の要素数を制御して 視覚的ストレスを軽減 する
- 長文入力時はテキストエリアをポップアップ表示し、
- ユーザが集中して書ける “守られた空間” を提供する
- アイコン・アニメーションは控えめにし、落ち着いたトーンを維持する


## 6.画面一覧・画面遷移

### 6-1ホーム画面内：クイック記録UI仕様

ホーム画面には、以下の「クイック記録カード」を配置する。

- 今日のまとめカード(3行日記+メンタル評価+体力評価)
- 感情吐き出しカード

---

### 6-2. 今日のまとめカード（3行日記＋メンタル／体力評価）

- カード構成：

- 見出し：「今日のまとめ」
  - サマリ表示
    - 3行日記：最新の1行目のみ抜粋表示(未入力なら「未記録」表示)
    - メンタル：当日のスコア(1～5)または「未記録」
    - 体力：当日のスコア(1～5)または「未記録」

- 挙動：
  - カードタップ時：
    - ページ遷移は行わず、ホーム画面上に**モーダルウインドウ**を表示して記録を行う。

- モーダルウインドウ内の仕様

  #### 1. メンタル/体力 5段階評価
    - モーダル内に「メンタル」「体力」の2セクションを表示する。
    - 各セクションは、タップ時に1～5段階の選択肢が**アコーディオン風アニメーション**で展開される。
      - (例)セクション行をタップ→下方向に1～5のボタン群がスライド展開される。
    - 数値だけでなく、ラベルも併記する（例：「1：かなりしんどい」「5：とても安定」など）。

---

  #### 2. 3行日記入力
    - 入力欄は最大3つのテキスト入力フィールドで構成される。
    - 初期状態では1行のみ表示する。
    - 1行目に入力し「決定」ボタンをタップすると、2行目の入力欄が追加表示される。
    - 同様に、2行目の「決定」ボタンをタップすると3行目の入力欄を追加する(最大3行)。
    - 3行分すべて入力し終える必要はなく、途中で保存してもよい。
    - モーダル上部（メンタル／体力セクションより上）に、  
        本モーダルの使い方を分かりやすく説明する短いガイド文を表示する。
          - 例：「1行日記は1行ずつ追加されます」「メンタルと体力は後から変更できます」など。

---

  #### 3. ボタン類
    - 「キャンセル」：変更を破棄してモーダルを閉じる。
    - 「保存」：
      - 3行分の入力内容(存在する行だけ)
      - メンタル/体力の選択値を当日分として保存する(記録の強制は行わない)
      - 保存完了後、モーダルを閉じ、ホーム画面のカードのサマリ表示を更新する。

---

  #### 4. アニメーション
    - 表示：`Fade + Scale-in`（中央にふわっと拡大して表示）
    - 非表示：`Fade-out + Scale-out`

---


### 6-3. 感情吐き出しシート(ボトムシート)

#### 1. 呼び出し元
- ホーム画面の「感情吐き出し」カードをタップすることで表示される。
- ページ遷移は行わず、ホーム画面の上にオーバーレイとして表示する。

---

#### 2. レイアウト
- 画面下からスライドインする「ボトムシート」を採用。
- 表示時の高さ
  - デフォルト：画面高さの**75～85%**
  - 目的：長文を快適にかけるスペースを確保するため
-背景(ホーム画面部分)は半透明の黒オーバーレイ(例:rgba(0,0,0,0.4))

---

#### 3. ヘッダー構成
- ボトムシート上部に以下を配置：
  - タイトル：「感情を吐き出す」
  - サブテキスト(ガイド文)
    - 例：「いま感じていることをそのまま書いて大丈夫です。」
  - 閉じるアイコン(x)
    長文入力時に誤たっぷしないよう、タップ領域は広めに設定する。

---

#### 4. 入力エリア（テキストフィールド）
- 画面幅いっぱいに広いテキストエリアを配置。
- 複数行入力可能。最大行数制限は当面設けない。
- プレースホルダー：
  - 例：「頭の中にあることを自由に書いてください…」
- 入力中の文字数に応じて自動的に高さが拡張される仕様でも良い（任意）
- 改行を自由に使えるようにする。

---

#### 5. 保存確認ポップアップ仕様

- ボトムシート内の「保存」ボタンタップ時に、  
  画面中央に小さな確認用モーダルウィンドウを表示する。

- 確認モーダルの文言（例）：
  - タイトル：なし or 「保存の確認」
  - メッセージ：
    - 例：「今日の感情ログとして保存してもよろしいですか？」

- ボタン：
  - 「キャンセル」：
    - 保存処理は行わず、確認モーダルのみ閉じる（ボトムシートはそのまま残す）。
  - 「保存する」：
    - 入力中のテキストを当日分として正式に保存する。
    - 保存完了後、「保存しました」などのトーストを表示する。
    - ボトムシートを閉じるか、開いたままにするかはUX観点で別途検討。

- アニメーション：
  - 表示：`Fade + Scale-in`（小さめポップアップがふわっと出るイメージ）
  - 非表示：`Fade-out + Scale-out`

- 備考：
  - 自動保存（5〜10秒ごとの下書き保存など）は行わない。
  - ユーザーの明示的な操作（「保存する」ボタン）によってのみ記録を残す。

---

#### 6. ボタン類
- ボトムシート下部に横並びで配置：
  1. 「閉じる」
     - 入力中の場合、下書きに自動保存した上で閉じる。
     - 未保存テキストがある場合は確認ダイアログを表示するかは検討項目。
  2. 「保存」
     - 入力中のテキストを当日分として保存する。
     - 保存後、トースト通知「保存しました」を表示。
     - ボトムシート自体は閉じる or 開いたままにするかはUX検討（初期案：閉じない）

---

#### 7. アニメーション
- 表示アニメーション：
  - `Slide-up + Fade-in`
  - 所要時間：**300〜350ms（ゆっくりめ）**
  - 目的：感情系UIは刺激を避けるため、急な動きは行わない。
- 非表示アニメーション：
  - `Slide-down + Fade-out`（約250ms）
- スクロール時のモーション：
  - テキストエリアが長文になり縦スクロールした場合でも、アニメーションは干渉しない。

---

#### 8. 当日データの扱い
- 当日分の感情ログがすでに存在する場合：
  - ボトムシート表示時にその内容を初期表示する。
  - 保存すると上書き保存となる。

---

#### 9. エラー・例外時の扱い
- 保存時にエラーが発生した場合：
  - 「保存に失敗しました」トーストを表示し、ユーザーの入力は保持する。
- ネット接続は不要（ローカル保存を前提とする）

---





