# HeartSketch 要件仕様書

## 1. アプリ概要

HeartSketch（こころスケッチ）は、  
**日々の体調・メンタルの状態を短時間で記録し、後から振り返りやすい形で可視化する**  
ことを目的としたメンタル管理アプリである。

本アプリの価値は以下にある。

- 記録のハードルを下げ、継続しやすい習慣を作る
- 毎日の記録を通じて、自分の状態を客観視しやすくする
- 思考や感情を書き出すことで、心の負荷を下げるサポートを行う

主要な特徴は  
**3行日記・5段階評価・感情吐き出しテキスト・シンプルで心理的負担の少ないUI**  
による、短時間での記録体験である。

---


## 2. ターゲットユーザー

本アプリの主なユーザーは以下の通りとする。

### 2-1. 想定ユーザー（対象者）
- 日々の体調やメンタルの変化に気づきにくい人
- 通院時に「最近どうですか？」と聞かれて説明が難しい人
- 手帳・メモ・日記が続かず、記録負担を軽くしたい人
- ストレスを自覚しづらく、限界に気づくのが遅い人
- 自分の感情を言語化することが苦手な人

### 2-2. 属性（利用シーンの例）
- 学生〜社会人まで幅広い層
- 通院経験の有無は問わない（メンタル疾患の有無も問わない）
- 日記が続かなかった経験があり、短時間での記録ニーズがある人


## 3. 困りごと・ニーズ

本章では、想定ユーザーおよび開発者自身が抱える課題を整理し、  
アプリが解決すべきニーズを明確化する。

### 3-1. 開発者視点（自分自身のニーズ）

- 自分の状態が数字で見えるほうが安心できる
- ネガティブ思考を素早く書き出せる場所がほしい
- 思考が頭に溜まると負担が大きいため、吐き出し処理が必要
- スマホから短時間で記録できる操作性がほしい
- 感情整理を継続的な習慣にしたい
- 情報量が多いUIは負担となり、継続が難しい

### 3-2. 一般ユーザー視点（想定ユーザーのニーズ）

- 日記は続かないが、1〜3分であれば書ける
- UIが複雑だと使う気になれないためシンプルさが必要
- 他人に感情・記録を見られたくない（プライバシー重視）
- 個人情報を入力したくないためアカウント不要で使いたい
- どこでもすぐに感情整理したい
- 自分の状態を理解する習慣をつけたい

### 3-3. 共通の困りごと

- 記録行動のハードルを下げる必要がある
- 難しくないUI・心理的負担の少ない画面が求められる
- 入力項目や操作が多いと継続しづらい
- ストレス蓄積に気づかず突然崩れることを避けたい

---


## 4. 機能要件（概要）

本章では、上記ニーズに基づき本アプリが提供する機能を定義する。  
まずは「短時間入力」「アカウント不要」「ローカル保存」を前提とした  
最小限のコア機能（MVP）から開発を開始する。

### 4-1. コア機能（MVP）

- **今日のまとめ(クイック記録)**
  - **3行日記**  
    - 1日の出来事・よかったこと・ひとことメモなどを最大3行で記録する機能
  - **メンタル／体力の5段階評価**  
    - その日のメンタル・体力（疲労）状態をそれぞれ5段階で記録する

- **感情吐き出しテキストエリア**  
  - ネガティブな思考・感情を自由に書き出せる入力欄

- **記録一覧表示**  
  - 日付単位で過去の記録を一覧表示し、振り返りや編集・削除ができる  
  - 過去日付の一覧表示は記録一覧画面で行う

- **自分取扱説明書**  
  - 自分の心身エネルギー状態（高い／安定／低い）に応じた  
    「自分の様子」「効果的な対処法」「他者に知っておいてほしい対応」を  
    まとめておける機能。
  - 状態ごとに編集・更新が可能。

- **AsyncStorage 保存（ローカル保存）**  
  - すべてのデータを端末ローカルに保存  
  - アカウント登録・サーバ通信は不要  

### 4-2. 拡張機能（将来的な追加候補）

- **ロック機能（任意）**  
  - アプリ起動時のPIN/生体認証ロック  
  - 端末ロックとの併用によりプライバシーを強化

- **通院記録**  
  - 通院日・病院名・症状メモなどを簡易的に記録  
  - 初期はシンプルな仕様とし、必要性に応じて拡張可能



## 5. 非機能要件

本章では、機能以外でアプリに求められる品質要件を定義する。

### 5-1. パフォーマンス

- 初回レンダリングは 2秒以内、画面遷移後の描画は 1秒以内 を目標とする
- データ保存（AsyncStorage の書き込み）は 3秒以内 を目標とする
- 軽量な状態管理とシンプルなDOM操作を優先し、処理負荷を最小限にする

### 5-2. 操作性・ユーザビリティ

- 1回の記録は 3分以内で完了 できる UI/遷移を設計する（認知負荷の軽減）
- 片手操作を前提とし、タップ領域・配置はスマホ操作に最適化する
- ホーム画面から 1タップ でコア機能（記録・一覧・今日の記録）へアクセス可能にする 
- 操作説明がなくても直感的に理解できるシンプルな導線とする

### 5-3. 信頼性・データ保全

- AsyncStorage 保存失敗時は、ユーザへ通知し リトライ可能な挙動 を提供す
- データは外部送信せず、アプリ削除まで端末内に保持 する
- 保存処理は基本的に同期的に完了するが、必要に応じて非同期キューで安全に書き込む
- 異常系（空データ・破損データ）は安全に復帰可能なガード処理を行う

### 5-4. セキュリティ・プライバシー

- アカウント登録・外部送信は一切行わず、完全ローカルでデータが完結 する
- 入力されたデータはセンシティブ情報として扱い、第三者が閲覧できないファイル構造を維持する
- アプリロック機能（PIN / 生体認証）は、ユーザ需要を見て リリース後に検討 する

### 5-5. 保守性・拡張性

- 各画面は「入力」「一覧」「詳細」など 責務単位でコンポーネント分割 する
- 共通ロジック（Validation・Date処理・Storage操作）はユーティリティ関数として集約する
- 将来的な機能追加（グラフ・カレンダー・ToDo）に対応できるよう、
- データ構造・状態管理は 単一責務（Single Responsibility） を遵守する
- ディレクトリ構成は /screens, /components, /hooks, /utils を基本とする

### 5-6. デザイン・表現方針（UIトーン）

- 刺激の少ない 低彩度カラー を基調とし、メンタルに負担をかけない配色とする
- 情報量は最小限にし、画面内の要素数を制御して 視覚的ストレスを軽減 する
- 長文入力時はテキストエリアをポップアップ表示し、
- ユーザが集中して書ける “守られた空間” を提供する
- アイコン・アニメーションは控えめにし、落ち着いたトーンを維持する


## 6.画面一覧・画面遷移

### 6-1. ホーム画面

- 目的
  - 今日の記録を素早く行える入口を用意し、主要機能へ迷わずアクセスできるようにする。

- 主な表示内容
  - 画面タイトル：「ホーム」
  - クイック記録カード（横2x縦2）
    - 今日のまとめカード（3行日記 / メンタル評価 / 体力評価）
    - 感情吐き出しカード
    - 記録一覧
    - 自分取扱説明書

- 操作・挙動
  - 各カードをタップすると、対応する画面へ遷移する。
    - 今日のまとめカード → 6-2 今日のまとめ入力画面
    - 感情吐き出しカード → 6-3 感情吐き出し入力画面
    - 記録一覧 → 6-4 記録一覧画面
    - 自分取扱説明書 → 6-5 自分取扱説明書（編集）


---

### 6-2. 今日のまとめ入力画面
（3行日記＋メンタル／体力評価）

- 目的
  - 今日の状態を簡単に振り返り、最小限の負担で記録できるようにする。

- 主な表示内容
  - モーダルタイトル：「今日のまとめ」

  - メンタル評価
    - 5段階評価（1～5）

  - 体力評価
    - 5段階評価（1～5）

 - 3行日記入力欄
  - 最大3行まで入力できるテキストエリア
  - すべての行を入力する必要はなく、未入力でも保存可能


  - 操作ボタン
    - キャンセル
    - 保存

- 操作・挙動
  - ホーム画面の「今日のまとめカード」をタップすると、
    ページ遷移は行わず、モーダルウインドウを表示する。

  - 体力・メンタル評価（5段階）
    - 評価はタップ操作で選択する方式とする
    - 通常時は選択結果のみを表示し、全選択肢は常時表示しない
    - 未選択の状態も許容し、未入力でも保存可能とする
    - 評価は「良し悪し」ではなく「状態の近さ」を選ぶ意図で設計する

  - 3行日記
    - 初期状態から3行分の入力欄を表示する。
    - すべての行を入力する必要はない（未入力でも保存可能）。

  - 「保存」
    - 入力済みの3行日記およびメンタル／体力評価を当日分として保存する。
    - 未入力の項目があっても保存は可能とする。
    - 保存後はモーダルを閉じ、ホーム画面のサマリ表示を更新する。
    - 保存時、端末の現在日時を取得し、記録日（YYYY-MM-DD）を付与する。
    - 当日分の記録は、記録日をキーとして上書き保存する。


  - 「キャンセル」
    - 入力内容を保存せず、モーダルを閉じる。

    - 表示：`Fade + Scale-in`（中央にふわっと拡大して表示）
    - 非表示：`Fade-out + Scale-out`

---


### 6-3. 感情吐き出し入力画面

- 目的
  - その時に感じている感情や考えを、評価や整理をせず自由に書き出せるようにする。

- 主な表示内容
  - ボトムシートタイトル：「感情を吐き出す」
  - ガイド文
    - 例：「いま感じていることを、そのまま書いて大丈夫です。」
  - 感情吐き出し用テキスト入力欄
    - 複数行入力可能
  - 操作ボタン
    - 閉じる
    - 保存

- 操作・挙動
    - ホーム画面の「感情吐き出しカード」をタップすると、
      ページ遷移は行わず、モーダルウインドウを表示する。

  - テキスト入力
    - 自由入力とし、文字数や行数の制限は設けない。
    - 当日分の記録がすでに存在する場合は、その内容を初期表示する。

  - 「保存」
    - 入力されたテキストを当日分の感情ログとして保存する。
    - すでに当日分の記録が存在する場合は上書き保存とする。
    - 保存に成功した場合は、トースト通知を表示する。
      - 表示文言例：「保存しました」
    - 保存に失敗した場合は、エラートーストを表示し、入力内容は保持する。
    - 保存時、端末の現在日時を取得し、記録日（YYYY-MM-DD）を付与する。
    - 当日分の記録は、記録日をキーとして上書き保存する。

  - 「閉じる」
    - モーダルウインドウを閉じ、ホーム画面に戻る。

---

### 6-4. 記録一覧画面（今日のまとめカード・感情書き出しシート両対応）
- 目的  
  - 過去の記録を日付順に確認し、必要に応じて編集・削除できるようにする。

- 表示内容
  - 記録一覧画面
    - フィルタ（直近7日 / 30日 /全期間）
    - 日付検索欄
    - 記録一覧：保存した日付と時刻を表示
    - 過去に記録した一覧
       - 各記録行はタップ可能
    - 編集ボタン
  - 記録詳細は以下のセクションで分離する
    - ①今日のまとめカード
      - 3行日記(3行表示)
      - 体力スコア（★1〜5）
      - メンタルスコア（★1〜5）
      - 記録日（YYYY-MM-DD）
      - 記録時刻
    - ②感情吐き出しシートの内容
      - 記録日（YYYY-MM-DD）
      - 記録時刻
    - データなし表示：「まだ記録がありません」
    - 記録編集画面
      - 保存後の今日のまとめカード/3行日記
      - 保存ボタン
      - 削除ボタン
- 操作・挙動
  - 詳細：
    - 記録一覧の各行をタップすると、記録詳細画面へ遷移する
  - 編集：
    - 記録一覧の「編集」ボタンをタップすると、記録編集画面へ遷移する
  - 上書き保存：編集画面に配置
  - 削除：確認ポップアップ表示 → OKなら削除
  - 戻る
    - 詳細画面の場合：詳細画面→記録一覧→ホーム画面
    - 編集画面の場合：編集画面→記録一覧→ホーム画面

---

### 6-5. 自分取扱説明書

- 目的
  - 自身の体調が悪い時に、自分・他人視点でそれぞれの対処法をマニュアルとしてまとめ、
    必要なときにすぐ確認できるようにする。

---

## 表示内容

### 6-5-1. セクション選択画面

- 画面タイトル：「自分取扱説明書」
- セクション選択カード（縦一列）
  - セクション①：体調が悪い時の自分（自分視点）
  - セクション②：体調が悪い時の自分（他人視点）
  - セクション③：作った説明書を読む

---

### 6-5-2. 編集画面（セクション① / セクション②）

※ 画面構成は共通。配色のみ異なる。

- 見出し
  - セクション①：「体調が悪い時の自分」
  - セクション②：「周りの人へ」

- 心身エネルギーの状態
  - 選択式（高い / 安定 / 低い）
  - タブ形式で表示

- 入力欄
  - 様子：自由入力テキストエリア
  - 対処：自由入力テキストエリア

- ボタン
  - 保存
  - 戻る

- 配色
  - セクション①：薄い青系
  - セクション②：薄い赤系
  - テキストエリアの配色はセクション①②で同一にしない

---

### 6-5-3. 閲覧画面（作った説明書を読む）

- セクション①（自分視点）の内容
- セクション②（他人視点）の内容
- 各セクションは縦一列に配置
- 心身エネルギー（高い / 安定 / 低い）はタブ形式で横並び表示
- 編集画面の配色をそのまま継承して表示
- 戻るボタン

---

## 操作・挙動

### セクション選択画面

- 各カードをタップすると、対応する画面へ遷移する。
  - セクション① → 編集画面（自分視点）
  - セクション② → 編集画面（他人視点）
  - セクション③ → 閲覧画面

---

### 編集画面（セクション① / セクション②）

- 心身エネルギー（高い / 安定 / 低い）はタブで切り替える。
- 初期表示は「高い」タブを選択状態とする。
- タブを切り替えると、対応する「様子 / 対処」の入力欄を表示する。
- 「保存」をタップすると、現時点までの内容を AsyncStorage に保存する。
- 未入力項目があっても保存は可能とする。
- 既存データがある場合は、確認ダイアログを表示せず上書き保存する。
- 保存成功時はトースト通知を表示する。
  - 表示文言例：「保存しました」
- 保存失敗時はエラートーストを表示し、入力内容は保持する。
- 「戻る」をタップすると、セクション選択画面へ戻る。

---

### 閲覧画面（セクション③）

- 編集は行えない。
- テキストエリアをタップしても何も起こらない。
- 自分視点 / 他人視点の内容をそれぞれ表示する。
- タブ操作により「高い / 安定 / 低い」の内容を切り替えて閲覧できる。
- 「戻る」をタップすると、セクション選択画面へ戻る。

---



#### メモ
- ユーザーが自分の状態を無理なく確認・記録できる入口として設計。
- 入力の有無を評価せず、未入力もその日の状態として受け止める思想をUIに反映。
- 枠線や強調を最小限に抑え、安心感と操作の分かりやすさの両立を目指した。

※ テキスト入力時はキーボード表示により、
  入力欄が隠れないようレイアウト調整を行う

  ※ 本画面はモーダルウインドウとして表示
※ 高さは画面の約90%を想定
※ 背景はオーバーレイでトーンダウン




今日のまとめ(当日分は一件)のオブジェクト具体例
```js
{
  type: "dailySummary",
  dayKey: "2025-12-14",
  updatedAt: "2025-12-14T10:23:45+09:00",
  diary1: "",
  diary2: "",
  diary3: "",
  physical: null,
  mental: null
}
```

感情吐き出し(当日分は一件)のオブジェクト具体例
```js
{
  type: "emotionDump",
  dayKey: "2025-12-14",
  updatedAt: "2025-12-14T10:30:12+09:00",
  text: "…"
}

```
